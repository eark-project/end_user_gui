
@model end_user_gui.Models.Order

@Html.EnumDropDownListFor(
    o => o.Status.Status,
    new { onchange = "updateStatusLink('" + ViewData["elementId"] + "')" }
    )

@Ajax.ActionLink("Save",
    "SetStatus",
    "Orders",
    new
    {
        orderId = Model.OrderUniqueID,
        set = true,
    },
    new AjaxOptions()
    {
        UpdateTargetId = ViewData["elementId"].ToString()
    },
    new { save = true }
    )

<script>
    function updateStatusLink(elementId) {
        var sel = $('#' + elementId + ' select');
        var a = $('#' + elementId + ' a[save]');
        if (!a.attr('orgHref')) {
            a.attr('orgHref', a.attr('href'));
        }
        a.attr(
            'href',
            a.attr('orgHref') + '&statusId=' + sel.val()
        );
        console.log(sel.attr('id'));
        console.log(sel.val());
        console.log(sel.text());
    }
</script>

@Ajax.ActionLink("Cancel",
    "SetStatus",
    "Orders",
    new
    {
        orderId = Model.OrderUniqueID,
        set = false,
        status = ""
    },
    new AjaxOptions()
    {
        UpdateTargetId = ViewData["elementId"].ToString()
    }
    )
